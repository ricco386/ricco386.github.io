<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Richard's Log</title><link>http://richard.kellnerovci.sk/</link><description>Public notepad about stuff I am currently playing with...</description><atom:link href="http://richard.kellnerovci.sk/feeds/raspberry-pi.rss.xml" rel="self"></atom:link><lastBuildDate>Sun, 12 Apr 2015 22:53:00 +0200</lastBuildDate><item><title>Minimized Raspbian image (no X server) with SD card backup</title><link>http://richard.kellnerovci.sk/minimize-raspbian-image.html</link><description>&lt;p&gt;Most of the time I am using Raspbian only in command line so I’ve decided to create a minimal image, with removed X server and other unnecessary stuff that is not needed for a server. &lt;/p&gt;
&lt;p&gt;You might want to ask why to remove all the stuff when SD cards are cheap today? One reason is that with less packages there is lesser probability to have bugs in the system and other reason is that updates will take less time, as I don’t need to update packages that I don’t need.&lt;/p&gt;
&lt;p&gt;Remove everything related to: X server, LXDE, Openbox, GTK, Alsa and TTF fonts. It will also remove the packages omxplayer, nano (vim rulez :), tsconf (for touch screens) and scratch (a programming environment aimed for kids).&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;sudo apt-get purge xserver* x11-common x11-utils x11-xkb-utils x11-xserver-utils xarchiver xauth xkb-data console-setup xinit lightdm libx{composite,cb,cursor,damage,dmcp,ext,font,ft,i,inerama,kbfile,klavier,mu,pm,randr,render,res,t,xf86}* lxde* lx{input,menu-data,panel,polkit,randr,session,session-edit,shortcut,task,terminal} obconf openbox gtk* libgtk* alsa* nano scratch tsconf desktop-file-utils omxplayer
sudo apt-get autoremove
sudo apt-get autoclean
sudo apt-get clean
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Not entirely sure why, but apt-get autoclean will remove Python libraries for GPIO and camera, so I had to install them back&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;sudo apt-get install python-picamera python3-picamera python3-rpi.gpio python-rpi.gpio
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Finally remove some files that left and I don’t think they are necessary&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;rm -rf /usr/share/icons/ /usr/games/ /usr/share/themes/ /usr/share/images/ /home/pi/python_games/
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Before cleanup:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;Filesystem                    Size  Used Avail Use% Mounted on
rootfs                        2.9G  2.5G  245M  92% /
/dev/root                     2.9G  2.5G  245M  92% /
devtmpfs                       88M     0   88M   0% /dev
tmpfs                          19M  228K   19M   2% /run
tmpfs                         5.0M     0  5.0M   0% /run/lock
tmpfs                          37M     0   37M   0% /run/shm
/dev/mmcblk0p1                 56M  9.8M   47M  18% /boot
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;After clean up:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;Filesystem                    Size  Used Avail Use% Mounted on
rootfs                        2.9G  922M  1.9G  34% /
/dev/root                     2.9G  922M  1.9G  34% /
devtmpfs                       88M     0   88M   0% /dev
tmpfs                          19M  224K   19M   2% /run
tmpfs                         5.0M     0  5.0M   0% /run/lock
tmpfs                          37M     0   37M   0% /run/shm
/dev/mmcblk0p1                 56M  9.8M   47M  18% /boot
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Image size went down from 2.5GB to 922MB which is significant improvement and after reboot everything seems working… &lt;/p&gt;
&lt;p&gt;It is always a good idea to backup, so let create an backup of the SD card with dd command. You have to know which device is your SD card, how to do so I have explained &lt;a href="/install-raspbian-on-raspberry-pi.html"&gt;here&lt;/a&gt;. Insert SD card to your Mac or Linux and run dd command (replace /dev/diskX with your path).&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;dd if=/dev/diskX of=/path/to/image bs=1M
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;In my case it would be&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;dd if=/dev/sdc1 of=~/raspbian-wheezy-minimized.img bs=1M
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;On some systems (like Mac) &lt;em&gt;1M&lt;/em&gt; has to be lower case &lt;em&gt;1m&lt;/em&gt;. This command takes quite a while. So grab a coffee and read another article.&lt;/p&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Richard Kellner</dc:creator><pubDate>Sun, 12 Apr 2015 22:53:00 +0200</pubDate><guid>tag:richard.kellnerovci.sk,2015-04-12:minimize-raspbian-image.html</guid><category>Raspberry Pi</category><category>Raspbian</category></item><item><title>Install Nginx PHP and MySQL on Raspberry Pi</title><link>http://richard.kellnerovci.sk/install-nginx-php-and-mysql-on-raspberry-pi.html</link><description>&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;2015-04-12&lt;/strong&gt;: Article has been updated with minor improvements and fixed steps to match current installation workflow.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Previously we have &lt;a href="/install-raspbian-on-raspberry-pi.html"&gt;installed Raspbian&lt;/a&gt;, now we can do some actual work and install Nginx, PHP and MySQL on our Raspberry Pi. Afterwards we can use our Raspberry Pi as full-fledged home webserver.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;sudo apt-get install nginx php5-fpm php5-cgi php5-cli php5-common
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;If you open the browser and go to your Raspberry Pi IP address, you will see the Welcome to Nginx site. Let’s create our own. We need a directory where we will store our pages, new directory has to be amended so it is accessible for Nginx.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;sudo mkdir -p /var/www/rasppi
sudo chmod -R 775 /var/www
sudo chown -R www-data:www-data /var/www
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Create Nginx configuration file.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;sudo vi /etc/nginx/sites-available/rasppi
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;and insert following config. You have to update it with IP address of your Raspberry Pi.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nt"&gt;server&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="err"&gt;   &lt;/span&gt; &lt;span class="n"&gt;listen&lt;/span&gt; &lt;span class="m"&gt;80&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="n"&gt;listen&lt;/span&gt; &lt;span class="n"&gt;for&lt;/span&gt; &lt;span class="n"&gt;ipv4&lt;/span&gt;
&lt;span class="err"&gt;   &lt;/span&gt; &lt;span class="n"&gt;server_name&lt;/span&gt; &lt;span class="m"&gt;127&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt; &lt;span class="n"&gt;rasppi&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="n"&gt;Add&lt;/span&gt; &lt;span class="n"&gt;your&lt;/span&gt; &lt;span class="n"&gt;Raspberry&lt;/span&gt; &lt;span class="n"&gt;Pi&lt;/span&gt; &lt;span class="n"&gt;IP&lt;/span&gt; &lt;span class="n"&gt;address&lt;/span&gt; &lt;span class="n"&gt;here&lt;/span&gt;

&lt;span class="err"&gt;   &lt;/span&gt; &lt;span class="n"&gt;access_log&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;var&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;log&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;nginx&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;rasppi&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;access&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;log&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="err"&gt;   &lt;/span&gt; &lt;span class="n"&gt;error_log&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;var&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;log&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;nginx&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;rasppi&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;error&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;log&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="err"&gt;   &lt;/span&gt; &lt;span class="n"&gt;root&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;var&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;www&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;rasppi&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="err"&gt;   &lt;/span&gt; &lt;span class="n"&gt;location&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt; &lt;span class="err"&gt;{&lt;/span&gt;
&lt;span class="err"&gt;   &lt;/span&gt; &lt;span class="err"&gt;   &lt;/span&gt; &lt;span class="n"&gt;root&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;var&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;www&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;rasppi&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="err"&gt;   &lt;/span&gt; &lt;span class="err"&gt;   &lt;/span&gt; &lt;span class="n"&gt;index&lt;/span&gt; &lt;span class="n"&gt;index&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;php&lt;/span&gt; &lt;span class="n"&gt;index&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;html&lt;/span&gt; &lt;span class="n"&gt;index&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;htm&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="err"&gt;   &lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="err"&gt;   &lt;/span&gt; &lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="nt"&gt;Parse&lt;/span&gt; &lt;span class="nt"&gt;all&lt;/span&gt; &lt;span class="nc"&gt;.php&lt;/span&gt; &lt;span class="nt"&gt;file&lt;/span&gt; &lt;span class="nt"&gt;in&lt;/span&gt; &lt;span class="nt"&gt;the&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;var&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;www&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nt"&gt;rasppi&lt;/span&gt; &lt;span class="nt"&gt;directory&lt;/span&gt;
&lt;span class="err"&gt;   &lt;/span&gt; &lt;span class="nt"&gt;location&lt;/span&gt; &lt;span class="o"&gt;~&lt;/span&gt; &lt;span class="err"&gt;\&lt;/span&gt;&lt;span class="nc"&gt;.php&lt;/span&gt;&lt;span class="o"&gt;$&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="err"&gt;   &lt;/span&gt; &lt;span class="err"&gt;   &lt;/span&gt; &lt;span class="n"&gt;fastcgi_split_path_info&lt;/span&gt; &lt;span class="o"&gt;^&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;.+&lt;/span&gt;&lt;span class="err"&gt;\&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;php&lt;/span&gt;&lt;span class="p"&gt;)(&lt;/span&gt;&lt;span class="o"&gt;.*&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="err"&gt;   &lt;/span&gt; &lt;span class="err"&gt;   &lt;/span&gt; &lt;span class="n"&gt;fastcgi_pass&lt;/span&gt; &lt;span class="m"&gt;127&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="m"&gt;9000&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="err"&gt;   &lt;/span&gt; &lt;span class="err"&gt;   &lt;/span&gt; &lt;span class="n"&gt;fastcgi_index&lt;/span&gt; &lt;span class="n"&gt;index&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;php&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="err"&gt;   &lt;/span&gt; &lt;span class="err"&gt;   &lt;/span&gt; &lt;span class="n"&gt;fastcgi_param&lt;/span&gt; &lt;span class="n"&gt;SCRIPT_FILENAME&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;var&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;www&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;rasppi&lt;/span&gt;&lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="n"&gt;fastcgi_script_name&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="err"&gt;   &lt;/span&gt; &lt;span class="err"&gt;   &lt;/span&gt; &lt;span class="n"&gt;include&lt;/span&gt; &lt;span class="n"&gt;fastcgi_params&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="err"&gt;   &lt;/span&gt; &lt;span class="err"&gt;   &lt;/span&gt; &lt;span class="n"&gt;fastcgi_param&lt;/span&gt; &lt;span class="n"&gt;QUERY_STRING&lt;/span&gt; &lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="n"&gt;query_string&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="err"&gt;   &lt;/span&gt; &lt;span class="err"&gt;   &lt;/span&gt; &lt;span class="n"&gt;fastcgi_param&lt;/span&gt; &lt;span class="n"&gt;REQUEST_METHOD&lt;/span&gt; &lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="n"&gt;request_method&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="err"&gt;   &lt;/span&gt; &lt;span class="err"&gt;   &lt;/span&gt; &lt;span class="n"&gt;fastcgi_param&lt;/span&gt; &lt;span class="n"&gt;CONTENT_TYPE&lt;/span&gt; &lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="n"&gt;content_type&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="err"&gt;   &lt;/span&gt; &lt;span class="err"&gt;   &lt;/span&gt; &lt;span class="n"&gt;fastcgi_param&lt;/span&gt; &lt;span class="n"&gt;CONTENT_LENGTH&lt;/span&gt; &lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="n"&gt;content_length&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="err"&gt;   &lt;/span&gt; &lt;span class="err"&gt;   &lt;/span&gt; &lt;span class="n"&gt;fastcgi_intercept_errors&lt;/span&gt; &lt;span class="n"&gt;on&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="err"&gt;   &lt;/span&gt; &lt;span class="err"&gt;   &lt;/span&gt; &lt;span class="n"&gt;fastcgi_ignore_client_abort&lt;/span&gt; &lt;span class="n"&gt;off&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="err"&gt;   &lt;/span&gt; &lt;span class="err"&gt;   &lt;/span&gt; &lt;span class="n"&gt;fastcgi_connect_timeout&lt;/span&gt; &lt;span class="m"&gt;60&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="err"&gt;   &lt;/span&gt; &lt;span class="err"&gt;   &lt;/span&gt; &lt;span class="n"&gt;fastcgi_send_timeout&lt;/span&gt; &lt;span class="m"&gt;180&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="err"&gt;   &lt;/span&gt; &lt;span class="err"&gt;   &lt;/span&gt; &lt;span class="n"&gt;fastcgi_read_timeout&lt;/span&gt; &lt;span class="m"&gt;180&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="err"&gt;   &lt;/span&gt; &lt;span class="err"&gt;   &lt;/span&gt; &lt;span class="n"&gt;fastcgi_buffer_size&lt;/span&gt; &lt;span class="m"&gt;128&lt;/span&gt;&lt;span class="n"&gt;k&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="err"&gt;   &lt;/span&gt; &lt;span class="err"&gt;   &lt;/span&gt; &lt;span class="n"&gt;fastcgi_buffers&lt;/span&gt; &lt;span class="m"&gt;4&lt;/span&gt; &lt;span class="m"&gt;256&lt;/span&gt;&lt;span class="n"&gt;k&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="err"&gt;   &lt;/span&gt; &lt;span class="err"&gt;   &lt;/span&gt; &lt;span class="n"&gt;fastcgi_busy_buffers_size&lt;/span&gt; &lt;span class="m"&gt;256&lt;/span&gt;&lt;span class="n"&gt;k&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="err"&gt;   &lt;/span&gt; &lt;span class="err"&gt;   &lt;/span&gt; &lt;span class="n"&gt;fastcgi_temp_file_write_size&lt;/span&gt; &lt;span class="m"&gt;256&lt;/span&gt;&lt;span class="n"&gt;k&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="err"&gt;   &lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="err"&gt;   &lt;/span&gt; &lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="nt"&gt;Disable&lt;/span&gt; &lt;span class="nt"&gt;viewing&lt;/span&gt; &lt;span class="nc"&gt;.htaccess&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="nt"&gt;amp&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="nc"&gt;.htpassword&lt;/span&gt;
&lt;span class="err"&gt;   &lt;/span&gt; &lt;span class="nt"&gt;location&lt;/span&gt; &lt;span class="o"&gt;~&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="err"&gt;\&lt;/span&gt;&lt;span class="nc"&gt;.ht&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="err"&gt;   &lt;/span&gt; &lt;span class="err"&gt;   &lt;/span&gt; &lt;span class="n"&gt;deny&lt;/span&gt; &lt;span class="n"&gt;all&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="err"&gt;   &lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="err"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Let’s allow this new config and disable default one.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;sudo ln -s /etc/nginx/sites-available/rasppi /etc/nginx/sites-enabled/rasppi
sudo rm /etc/nginx/sites-enabled/default
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;We are done with Nginx settings, now we have to update php-fpm configuration, edit following file&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;sudo vi /etc/php5/fpm/pool.d/www.conf
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;find line with &lt;code&gt;listen = /var/run/php5-fpm.sock&lt;/code&gt; and replace to: &lt;code&gt;listen = 127.0.0.1:9000&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;Create index page with PHP info so we are sure that everything works&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="cp"&gt;&amp;lt;?php&lt;/span&gt;
&lt;span class="nb"&gt;phpinfo&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
&lt;span class="cp"&gt;?&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;We have to restart both services&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;sudo service php5-fpm restart 
sudo service nginx restart
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Nginx and PHP are finished and running, open your browser and check it out. You should see the PHP info page displaying your Raspberry is running PHP 5.4. And we can install MySQL database:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;sudo apt-get install mysql-server mysql-client php5-mysql
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;during the installation you should be asked for root password, if this hasn’t happened, don’t worry and set it with following command&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;mysqladmin -u root password yourSECRETrootSQLpassword
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;We are done. Now we have web server with PHP and MySQL running on Raspberry Pi.&lt;/p&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Richard Kellner</dc:creator><pubDate>Sun, 12 Apr 2015 10:53:00 +0200</pubDate><guid>tag:richard.kellnerovci.sk,2013-03-08:install-nginx-php-and-mysql-on-raspberry-pi.html</guid><category>Raspberry Pi</category><category>Nginx</category><category>PHP</category><category>MySQL</category></item><item><title>Install Raspbian on Raspberry Pi</title><link>http://richard.kellnerovci.sk/install-raspbian-on-raspberry-pi.html</link><description>&lt;p&gt;Raspbian “wheezy” is optimized version of Debian for Raspberry Pi. We will talk about how to install Raspbian on SD card so it is bootable on Raspberry Pi. This guide is almost identical with official wiki, but we will also upgrade firmware and run some comparison tests. We will do all the work in Linux terminal, if you are looking for graphical environment or Windows installer I suggest &lt;a href="http://elinux.org/RPi_Easy_SD_Card_Setup"&gt;oficial wiki&lt;/a&gt;.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Download Raspbian image from official page: &lt;a href="http://www.raspberrypi.org/downloads"&gt;http://www.raspberrypi.org/downloads&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Verify downloaded file hashif it matches&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;code&gt;sha1sum ~/2013-02-09-wheezy-raspbian.zip&lt;/code&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Unzip downloaded file&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;code&gt;unzip ~/2013-02-09-wheezy-raspbian.zip&lt;/code&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;List mounted devices&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;code&gt;df -h&lt;/code&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Insert SD card to computer&lt;/li&gt;
&lt;li&gt;List mounted devices again and notice which one is new&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;code&gt;df -h&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;There should be new device, notice where it is mounted, for example: /dev/sdd&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Disconnect all mounted partitions (if there is more of them, you have to repeat command for all of them) &lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;code&gt;umount /dev/sdd1&lt;/code&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;with dd command move image to SD card. Run it as sudo&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;code&gt;sudo dd bs=4M if=~/2013-02-09-wheezy-raspbian.img of=/dev/sdd&lt;/code&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Make sure cache was cleared and remove the card&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;code&gt;sudo sync&lt;/code&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Insert SD cart to Raspberry Pi and let have some fun&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;It is handy to have monitor connected to Raspberry on first boot, because there will be setup screen where you can setup basic things. One of the useful things is to resign Raspbian partition to SD card size, or start SSH on boot, so we can connect to Raspberry later on without having it connected to monitor.&lt;/p&gt;
&lt;p&gt;After login update all installed packages to newest versions.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;apt-get update
apt-get upgrade
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Lets do IO operations benchmark on SD card&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;pi@raspberrypi ~ $ dd if=/dev/zero of=~/test.tmp bs=500K count=1024
1024+0 records in
1024+0 records out
524288000 bytes (524 MB) copied, 49.9496 s, 10.5 MB/s
pi@raspberrypi ~ $ dd if=~/test.tmp of=/dev/null bs=500K count=1024
1024+0 records in
1024+0 records out&amp;lt;br&amp;gt;524288000 bytes (524 MB) copied, 26.9565 s, 19.4 MB/s
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Lets have a look at firmware version with command vcgencmd&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;pi@raspberrypi ~ $ vcgencmd version
Feb 7 2013 16:46:17 
Copyright (c) 2012 Broadcom
version 367974 (release)
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Latest firmware is available on github: &lt;a href="https://github.com/Hexxeh/rpi-firmware"&gt;https://github.com/Hexxeh/rpi-firmware&lt;/a&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;sudo wget http://goo.gl/1BOfJ -O /usr/bin/rpi-update &amp;amp;&amp;amp; sudo chmod +x /usr/bin/rpi-update
sudo rpi-update
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Lets have a look at output with upgraded firmware, at the end…&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;pi@raspberrypi ~ $ vcgencmd version
Mar 4 2013 22:02:46 
Copyright (c) 2012 Broadcom
version 374489 (release)
pi@raspberrypi ~ $ dd if=/dev/zero of=~/test.tmp bs=500K count=1024
1024+0 records in
1024+0 records out
524288000 bytes (524 MB) copied, 45.1423 s, 11.6 MB/s
pi@raspberrypi ~ $ dd if=~/test.tmp of=/dev/null bs=500K count=1024
1024+0 records in
1024+0 records out
524288000 bytes (524 MB) copied, 27.4592 s, 19.1 MB/s
&lt;/pre&gt;&lt;/div&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Richard Kellner</dc:creator><pubDate>Thu, 07 Mar 2013 09:31:00 +0100</pubDate><guid>tag:richard.kellnerovci.sk,2013-03-07:install-raspbian-on-raspberry-pi.html</guid><category>Raspberry Pi</category><category>Raspbian</category></item></channel></rss>